# ğŸ“± æ‰‹æœºè¿œç¨‹ SSH è¿æ¥ Mac ç”µè„‘å®Œæ•´æ•™ç¨‹

> ä½¿ç”¨ Tailscale å®ç°å¼‚åœ°ç»„ç½‘ï¼Œæ— éœ€å…¬ç½‘ IPï¼Œå®‰å…¨å¯é 

---

## ğŸ“‹ ç›®å½•

- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [åŸç†ç®€ä»‹](#åŸç†ç®€ä»‹)
- [ç”µè„‘ç«¯é…ç½®](#ç”µè„‘ç«¯é…ç½®)
- [æ‰‹æœºç«¯é…ç½®](#æ‰‹æœºç«¯é…ç½®)
- [SSH è¿æ¥](#ssh-è¿æ¥)
- [è¿›é˜¶ï¼šæ‰‹æœº VPN èµ°ç”µè„‘æµé‡](#è¿›é˜¶æ‰‹æœº-vpn-èµ°ç”µè„‘æµé‡exit-node)
  - [ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½](#ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½)
  - [é…ç½®æ­¥éª¤](#é…ç½®æ­¥éª¤)
  - [éªŒè¯æ–¹æ³•](#éªŒè¯æ–¹æ³•)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ä¸€ï¼šæ‰‹æœºè¿œç¨‹ AI ç¼–ç¨‹ ğŸ’»

> å½“æ‰‹æœºå’Œç”µè„‘ä¸åœ¨åŒä¸€ç½‘ç»œæ—¶ï¼Œæƒ³åœ¨æ‰‹æœºä¸Šä½¿ç”¨ Kimi CLI ç­‰ AI ç¼–ç¨‹å·¥å…·

**å®é™…æ¡ˆä¾‹ï¼š**
- ä½ åœ¨å’–å•¡é¦†ç”¨æ‰‹æœºï¼Œå®¶é‡Œç”µè„‘å¼€ç€
- é€šè¿‡ SSH è¿æ¥åˆ° Mac ç»ˆç«¯
- ç›´æ¥ä½¿ç”¨ Kimi CLI è¿›è¡Œä»£ç å®¡æŸ¥ã€ç”Ÿæˆã€é‡æ„

```bash
# æ‰‹æœº SSH è¿æ¥å
kimi "å¸®æˆ‘ä¼˜åŒ–è¿™æ®µä»£ç "
kimi "è§£é‡Šä¸€ä¸‹è¿™ä¸ªæŠ¥é”™"
kimi "ç”Ÿæˆä¸€ä¸ª Python è„šæœ¬"
```

**ä¼˜åŠ¿ï¼š**
- ä¸éœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…å¤æ‚çš„å¼€å‘ç¯å¢ƒ
- åˆ©ç”¨ç”µè„‘çš„æ€§èƒ½å’Œå®Œæ•´å·¥å…·é“¾
- AI ç¼–ç¨‹åŠ©æ‰‹éšæ—¶å¯ç”¨

---

### åœºæ™¯äºŒï¼šè¿œç¨‹é‡å¯ OpenClaw ç½‘å…³ ğŸ¤–

> OpenClaw Gateway æ„å¤–å…³é—­ï¼Œä½†ç”µè„‘ä¸åœ¨èº«è¾¹

**å®é™…æ¡ˆä¾‹ï¼š**
- OpenClaw Gateway è¿›ç¨‹å´©æºƒï¼ŒDiscord Bot ä¸‹çº¿
- ä½ åœ¨å¤–é¢ï¼Œæ— æ³•ç‰©ç†æ¥è§¦ç”µè„‘
- é€šè¿‡æ‰‹æœº SSH è¿œç¨‹é‡å¯æœåŠ¡

```bash
# è¿æ¥åˆ°ç”µè„‘å
pm2 status                    # æŸ¥çœ‹ç½‘å…³çŠ¶æ€
pm2 restart openclaw-gateway  # é‡å¯ç½‘å…³
pm2 logs openclaw-gateway     # æŸ¥çœ‹æ—¥å¿—
```

**è§£å†³çš„ç—›ç‚¹ï¼š**
- ä¸å†æ‹…å¿ƒæœåŠ¡å®•æœºåå¿…é¡»å›å®¶å¤„ç†
- éšæ—¶éšåœ°ç»´æŠ¤ä½ çš„ AI åŠ©æ‰‹
- ç´§æ€¥æƒ…å†µä¸‹å¿«é€Ÿæ¢å¤æœåŠ¡

---

### åœºæ™¯ä¸‰ï¼šå¼‚åœ°æ–‡ä»¶ç®¡ç† ğŸ“‚

> éœ€è¦è®¿é—®ç”µè„‘ä¸Šçš„æ–‡ä»¶ï¼Œä½†æ²¡å¸¦ç”µè„‘

**å®é™…æ¡ˆä¾‹ï¼š**
- é‡è¦æ–‡æ¡£å­˜åœ¨å®¶é‡Œç”µè„‘ä¸Š
- éœ€è¦é€šè¿‡ SFTP æˆ–å‘½ä»¤è¡ŒæŸ¥æ‰¾ã€ä¼ è¾“æ–‡ä»¶
- ç”šè‡³å¯ä»¥ç”¨ `vim` è¿œç¨‹ç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
# è¿œç¨‹æŸ¥çœ‹æ–‡ä»¶
ls ~/Documents/important/
cat ~/.config/app/config.yml

# é…åˆ SCP ä»æ‰‹æœºä¼ è¾“æ–‡ä»¶
scp file.txt user@100.x.x.x:~/Downloads/
```

---

### åœºæ™¯å››ï¼šç›‘æ§å’Œè¿ç»´ ğŸ“Š

> éšæ—¶æŸ¥çœ‹ç”µè„‘è¿è¡ŒçŠ¶æ€

```bash
# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
top                    # CPU/å†…å­˜ä½¿ç”¨
df -h                  # ç£ç›˜ç©ºé—´
uptime                 # è¿è¡Œæ—¶é—´

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
curl localhost:3000/health  # æ£€æŸ¥ API å¥åº·çŠ¶æ€
tail -f /var/log/system.log # å®æ—¶æ—¥å¿—
```

---

## åŸç†ç®€ä»‹

Tailscale åŸºäº WireGuard åè®®ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç§æœ‰ç½‘ç»œï¼ˆVPNï¼‰ï¼Œè®©ä½ çš„è®¾å¤‡å³ä½¿åœ¨ä¸åŒç½‘ç»œä¸‹ä¹Ÿèƒ½åƒåœ¨åŒä¸€å±€åŸŸç½‘å†…é€šä¿¡ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- âœ… æ— éœ€å…¬ç½‘ IPï¼Œæ— éœ€ç«¯å£è½¬å‘
- âœ… ç«¯åˆ°ç«¯åŠ å¯†ï¼Œå®‰å…¨å¯é 
- âœ… P2P ç›´è¿ä¼˜å…ˆï¼Œå»¶è¿Ÿä½
- âœ… æ”¯æŒ iOSã€Androidã€macOSã€Windowsã€Linux

```
æ‰‹æœº (4G/5G) â”€â”€â”€â–º Tailscale ç½‘ç»œ â”€â”€â”€â–º å®¶é‡Œç”µè„‘
      â”‚                                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ WireGuard éš§é“ â”€â”€â”€â”€â”€â”€â”˜
              (ç«¯åˆ°ç«¯åŠ å¯†)
```

---

## ç”µè„‘ç«¯é…ç½®

### 1. å®‰è£… Tailscale

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install tailscale

# æˆ–ä½¿ç”¨å®˜æ–¹å®‰è£…åŒ…
# https://tailscale.com/download
```

### 2. å¯åŠ¨å¹¶ç™»å½•

```bash
# å¯åŠ¨ç³»ç»ŸæœåŠ¡ï¼ˆéœ€è¦å¯†ç ï¼‰
sudo tailscaled install-system-daemon

# ç™»å½•ï¼ˆä¼šå¼¹å‡ºæµè§ˆå™¨è®¤è¯ï¼‰
tailscale up

# æŸ¥çœ‹åˆ†é…åˆ°çš„ IP
tailscale ip -4
# è¾“å‡ºç¤ºä¾‹ï¼š100.x.x.x
```

### 3. å¼€å¯ macOS è¿œç¨‹ç™»å½•ï¼ˆSSHï¼‰

**æ–¹æ³• A - å›¾å½¢ç•Œé¢ï¼š**
```
ç³»ç»Ÿè®¾ç½® â†’ é€šç”¨ â†’ å…±äº« â†’ è¿œç¨‹ç™»å½• â†’ å¼€å¯
```

**æ–¹æ³• B - ç»ˆç«¯ï¼š**
```bash
sudo systemsetup -setremotelogin on
```

**éªŒè¯ SSH æ˜¯å¦å·¥ä½œï¼š**
```bash
ssh localhost
# è¾“å…¥å¯†ç åèƒ½ç™»å½•å³æˆåŠŸ
```

### 4. è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰
brew install pm2

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > ~/tailscale-keeper.sh << 'EOF'
#!/bin/bash
while true; do
    if ! tailscale status &>/dev/null; then
        tailscale up --accept-routes
    fi
    sleep 60
done
EOF
chmod +x ~/tailscale-keeper.sh

# ä½¿ç”¨ PM2 ç®¡ç†
pm2 start ~/tailscale-keeper.sh --name tailscale-keeper
pm2 save

# è®¾ç½® PM2 å¼€æœºè‡ªå¯
pm2 startup
```

---

## æ‰‹æœºç«¯é…ç½®

### 1. å®‰è£… Tailscale App

- **iOS**: App Store æœç´¢ "Tailscale"
- **Android**: Google Play æˆ–å®˜ç½‘ä¸‹è½½

### 2. ç™»å½•

ä½¿ç”¨**ä¸ç”µè„‘ç›¸åŒçš„è´¦å·**ç™»å½•ï¼ˆGitHub/Google/å¾®è½¯è´¦å·ï¼‰

### 3. éªŒè¯è¿æ¥

ç™»å½•åï¼Œä½ åº”è¯¥èƒ½åœ¨ App ä¸­çœ‹åˆ°ï¼š
- ä½ çš„ç”µè„‘åç§°
- ç”µè„‘åˆ†é…çš„ IPï¼ˆå¦‚ `100.x.x.x`ï¼‰
- è¿æ¥çŠ¶æ€æ˜¾ç¤ºä¸º "Connected"

---

## SSH è¿æ¥

### ä½¿ç”¨ iOS SSH å®¢æˆ·ç«¯

æ¨è Appï¼š
- **Termius**ï¼ˆå…è´¹ï¼Œæ¨èï¼‰
- **Prompt 2**ï¼ˆä»˜è´¹ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼‰
- **Blink Shell**ï¼ˆä»˜è´¹ï¼Œä¸“ä¸šçº§ï¼‰

**è¿æ¥é…ç½®ï¼š**

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| ä¸»æœº/åœ°å€ | `100.x.x.x`ï¼ˆä½ çš„ç”µè„‘ Tailscale IPï¼‰ |
| ç«¯å£ | `22` |
| ç”¨æˆ·å | `ä½ çš„ macOS ç”¨æˆ·å` |
| å¯†ç  | `ä½ çš„ macOS ç™»å½•å¯†ç ` |

æˆ–ä½¿ç”¨ **SSH å¯†é’¥**ï¼ˆæ›´å®‰å…¨ï¼‰ï¼š

```bash
# åœ¨ç”µè„‘ä¸Šç”Ÿæˆå¯†é’¥ï¼ˆå¦‚å°šæœªç”Ÿæˆï¼‰
ssh-keygen -t ed25519

# æŸ¥çœ‹å…¬é’¥
cat ~/.ssh/id_ed25519.pub
```

å°†ç§é’¥å¯¼å…¥æ‰‹æœº SSH Appï¼Œå³å¯å…å¯†ç ç™»å½•ã€‚

### æµ‹è¯•è¿æ¥

è¿æ¥æˆåŠŸåï¼Œè¯•è¯•è¿™äº›å‘½ä»¤ï¼š
```bash
whoami          # æ˜¾ç¤ºç”¨æˆ·å
hostname        # æ˜¾ç¤ºç”µè„‘å
pwd             # å½“å‰ç›®å½•
ls -la          # åˆ—å‡ºæ–‡ä»¶
```

---

## è¿›é˜¶ï¼šæ‰‹æœº VPN èµ°ç”µè„‘æµé‡ï¼ˆExit Nodeï¼‰

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Ÿ

**iOS çš„é™åˆ¶**ï¼šiPhone åªèƒ½åŒæ—¶è¿è¡Œä¸€ä¸ª VPNã€‚å½“ä½ éœ€è¦ä½¿ç”¨ï¼š
- ğŸ”’ **Tailscale**ï¼ˆSSH å›å®¶ï¼‰
- ğŸŒ **ç¿»å¢™ VPN**ï¼ˆè®¿é—®å¤–ç½‘ï¼‰

ä½ åªèƒ½äºŒé€‰ä¸€ï¼

**è§£å†³æ–¹æ¡ˆ**ï¼šè®© Tailscale å…¼ä»»ä¸¤è€…ï¼é€šè¿‡ Exit Node åŠŸèƒ½ï¼Œæ‰‹æœºæ‰€æœ‰æµé‡éƒ½ç»è¿‡ä½ çš„ Macï¼Œåªè¦ Mac èƒ½ç¿»å¢™ï¼Œæ‰‹æœºå°±èƒ½ç¿»å¢™ã€‚

```
æ‰‹æœº â”€â”€â–º Tailscale â”€â”€â–º Mac ç”µè„‘ â”€â”€â–º äº’è”ç½‘
       (åŠ å¯†éš§é“)      (ä½ çš„å‡ºå£)
```

### ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | è¯´æ˜ |
|------|------|
| ğŸŒ **ç»Ÿä¸€å‡ºå£ IP** | æ‰‹æœºæ˜¾ç¤ºå’Œç”µè„‘ç›¸åŒçš„å…¬ç½‘ IPï¼Œæ–¹ä¾¿ IP ç™½åå•ç®¡ç† |
| ğŸ”“ **æ›¿ä»£ç¿»å¢™ VPN** | Mac ä¸Šçš„ä»£ç†/ç¿»å¢™å·¥å…·ï¼Œæ‰‹æœºä¹Ÿèƒ½å…±äº«ä½¿ç”¨ |
| ğŸ›¡ï¸ **å®‰å…¨å®¡è®¡** | æ‰€æœ‰æ‰‹æœºæµé‡ç»è¿‡å®¶é‡Œç”µè„‘ï¼Œå¯ç»Ÿä¸€ç›‘æ§å’Œè¿‡æ»¤ |
| ğŸ¢ **å…¬å¸ç½‘ç»œ** | å…¬å¸é™å®šçš„ç½‘ç»œèµ„æºï¼Œé€šè¿‡æ‰‹æœºä¹Ÿèƒ½è®¿é—® |

---

### é…ç½®æ­¥éª¤

#### 1ï¸âƒ£ ç”µè„‘ç«¯å¼€å¯ Exit Node

```bash
# å¼€å¯ Exit Node åŠŸèƒ½ï¼ˆéœ€è¦å¯†ç ï¼‰
sudo tailscale up --advertise-exit-node --accept-routes
```

**éªŒè¯æ˜¯å¦æˆåŠŸ**ï¼š
```bash
tailscale status
# åº”è¯¥æ˜¾ç¤ºï¼šoffers exit node
```

---

#### 2ï¸âƒ£ ç®¡ç†åå°æˆæƒ

1. è®¿é—® https://login.tailscale.com/admin/machines
2. æ‰¾åˆ°ä½ çš„ç”µè„‘ï¼ˆå¦‚ `longjiaqidemacbook-pro-2`ï¼‰
3. ç‚¹å‡»å³ä¾§ **ã€Œâ‹®ã€**ï¼ˆä¸‰ä¸ªç‚¹èœå•ï¼‰â†’ **ã€ŒEdit route settings...ã€**
4. âœ… å‹¾é€‰ **ã€ŒUse as exit nodeã€**
5. ç‚¹å‡» **ã€ŒSaveã€** ä¿å­˜

> âš ï¸ **æ³¨æ„**ï¼šè¿™ä¸€æ­¥å¿…é¡»åœ¨ç½‘é¡µç«¯å®Œæˆï¼Œä¸èƒ½åªåœ¨å®¢æˆ·ç«¯è®¾ç½®ï¼

---

#### 3ï¸âƒ£ æ‰‹æœºç«¯å¯ç”¨

1. æ‰“å¼€ **Tailscale App**
2. ç‚¹å‡»é¡¶éƒ¨ **ã€ŒMachinesã€** æŸ¥çœ‹è®¾å¤‡åˆ—è¡¨
3. æ‰¾åˆ°ä½ çš„ Mac ç”µè„‘
4. ç‚¹å‡» **ã€ŒUse exit nodeã€** å¼€å…³
5. ç­‰å¾…æ˜¾ç¤º **ã€ŒConnected via [ä½ çš„ç”µè„‘å]ã€**

**å›¾æ ‡å˜åŒ–**ï¼š
- æœªå¯ç”¨ï¼šğŸ“± æ™®é€š WiFi/æµé‡å›¾æ ‡
- å·²å¯ç”¨ï¼šğŸ”’ æ˜¾ç¤ºä¸€ä¸ªå°ç®­å¤´ï¼Œè¡¨ç¤ºæµé‡è¢«è½¬å‘

---

#### 4ï¸âƒ£ éªŒè¯æ˜¯å¦æˆåŠŸ

**æ–¹æ³• 1ï¼šæŸ¥ IP**
```
æ‰‹æœºæµè§ˆå™¨è®¿é—®ï¼šip.sb æˆ– ip138.com
```
- âœ… æˆåŠŸï¼šæ˜¾ç¤ºçš„ IP æ˜¯ä½ **ç”µè„‘çš„å…¬ç½‘ IP**
- âŒ å¤±è´¥ï¼šæ˜¾ç¤ºçš„æ˜¯æ‰‹æœºè¿è¥å•†çš„ IP

**æ–¹æ³• 2ï¼šæŸ¥ç½‘ç»œè·¯å¾„**
```bash
# åœ¨æ‰‹æœºä¸Šç”¨ Termius ç­‰å·¥å…·æ‰§è¡Œ
traceroute 8.8.8.8
# ç¬¬ä¸€è·³åº”è¯¥æ˜¯ä½ çš„ Tailscale IPï¼ˆ100.x.x.xï¼‰
```

**æ–¹æ³• 3ï¼šTailscale çŠ¶æ€**
```bash
# åœ¨ç”µè„‘ä¸Šæ‰§è¡Œ
tailscale status
# æ‰‹æœºåº”è¯¥æ˜¾ç¤ºï¼šactive; using [ä½ çš„ç”µè„‘å] as exit node
```

---

### è¿›é˜¶ï¼šæ£€æŸ¥ç”µè„‘æ˜¯å¦èƒ½ç¿»å¢™

å¦‚æœæ‰‹æœºé€šè¿‡ Exit Node åè¿˜æ˜¯æ— æ³•è®¿é—®æŸäº›ç½‘ç«™ï¼Œéœ€è¦æ£€æŸ¥ç”µè„‘æœ¬èº«çš„ç¿»å¢™å·¥å…·ï¼š

```bash
# åœ¨ç”µè„‘ä¸Šæµ‹è¯•
curl -s https://www.google.com -o /dev/null -w "%{http_code}"
# è¿”å› 200 è¡¨ç¤ºèƒ½ç¿»å¢™

# å¦‚æœè¿”å› 000 æˆ–è¶…æ—¶ï¼Œè¯´æ˜ç”µè„‘æœ¬èº«ä¸èƒ½ç¿»å¢™
# éœ€è¦é…ç½®ç”µè„‘çš„ä»£ç†å·¥å…·ï¼ˆClash/Surge/Shadowsocks ç­‰ï¼‰
```

**å¸¸è§é…ç½®**ï¼š
- **Clash**ï¼šå¼€å¯ã€Œå…è®¸å±€åŸŸç½‘è¿æ¥ã€
- **Surge**ï¼šå¼€å¯ã€ŒSystem Proxyã€
- **Shadowsocks**ï¼šå¼€å¯ã€Œå…¨å±€æ¨¡å¼ã€æˆ–é…ç½® PAC

---

### å¦‚ä½•å…³é—­ Exit Node

**ä¸´æ—¶å…³é—­**ï¼ˆä¿ç•™ Tailscale è¿æ¥ï¼Œåªå…³é—­æµé‡è½¬å‘ï¼‰ï¼š

```
æ‰‹æœºç«¯ï¼šTailscale App â†’ å…³é—­ã€ŒUse exit nodeã€
```

**å®Œå…¨å…³é—­**ï¼ˆç”µè„‘ä¸å†ä½œä¸ºå‡ºå£èŠ‚ç‚¹ï¼‰ï¼š

```bash
# ç”µè„‘ç«¯æ‰§è¡Œ
sudo tailscale up --accept-routes
# ï¼ˆå»æ‰ --advertise-exit-node å‚æ•°ï¼‰

# ç„¶ååœ¨ç®¡ç†åå°å–æ¶ˆå‹¾é€‰ã€ŒUse as exit nodeã€
```

---

### âš ï¸ æ³¨æ„äº‹é¡¹

| æ³¨æ„ç‚¹ | è¯´æ˜ |
|--------|------|
| **ç”µè„‘å¿…é¡»å¼€æœº** | å…³æœºåæ‰‹æœºä¼šæ–­ç½‘ï¼ˆæˆ–å›é€€åˆ°ç›´è¿ï¼‰ |
| **ç”µè„‘å¿…é¡»æœ‰ç½‘** | ç”µè„‘æ–­ç½‘ï¼Œæ‰‹æœºä¹Ÿæ— æ³•ä¸Šç½‘ |
| **è€—ç”µé‡å¢åŠ ** | Mac éœ€è¦å¤„ç†æ‰‹æœºçš„ç½‘ç»œæµé‡ |
| **æµé‡åŒå€è®¡è´¹** | æ‰‹æœºæµé‡ â†’ Mac â†’ äº’è”ç½‘ï¼Œå¯èƒ½ä¼šæ¶ˆè€—æ›´å¤šæµé‡ |
| **é€Ÿåº¦å—é™** | å–å†³äº Mac çš„ä¸Šä¼ å¸¦å®½å’Œæ‰‹æœºç½‘ç»œ |

---

### ğŸ”„ å¿«é€Ÿåˆ‡æ¢æ–¹æ¡ˆ

å¦‚æœä½ æœ‰æ—¶éœ€è¦ç¿»å¢™ï¼Œæœ‰æ—¶ä¸éœ€è¦ï¼š

```bash
# åˆ›å»ºå¿«æ·åˆ‡æ¢è„šæœ¬
echo '#!/bin/bash
if tailscale status | grep -q "offers exit node"; then
    echo "å…³é—­ Exit Node..."
    sudo tailscale up --accept-routes
else
    echo "å¼€å¯ Exit Node..."
    sudo tailscale up --advertise-exit-node --accept-routes
fi' > ~/toggle-exit-node.sh
chmod +x ~/toggle-exit-node.sh
```

ä½¿ç”¨ï¼š
```bash
~/toggle-exit-node.sh
```

---

## å¸¸è§é—®é¢˜

### Q1: æ‰‹æœºè¿æ¥åæ˜¾ç¤º "offline"

**åŸå› ï¼š** iOS åå°é™åˆ¶ï¼Œé”å±å VPN å¯èƒ½è¢«æš‚åœ

**è§£å†³ï¼š** é‡æ–°æ‰“å¼€ Tailscale App å³å¯

### Q2: iOS æ— æ³•åŒæ—¶è¿è¡Œ Tailscale å’Œå…¶ä»– VPN

**åŸå› ï¼š** iOS é™åˆ¶åªèƒ½æœ‰ä¸€ä¸ª VPN éš§é“

**è§£å†³ï¼š**
- ä½¿ç”¨ Exit Node åŠŸèƒ½ï¼ˆè®© Tailscale å…¼ä»»ç¿»å¢™ï¼‰
- æˆ–æŒ‰éœ€åˆ‡æ¢ VPN

### Q3: è¿æ¥æˆåŠŸä½† SSH å¤±è´¥

**æ’æŸ¥æ­¥éª¤ï¼š**
```bash
# åœ¨ç”µè„‘ä¸Šæ£€æŸ¥ SSH æœåŠ¡
sudo lsof -i :22

# æ£€æŸ¥ Tailscale çŠ¶æ€
tailscale status

# æ£€æŸ¥é˜²ç«å¢™
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate
```

### Q4: ç”µè„‘é‡å¯å Tailscale æ²¡è‡ªåŠ¨è¿æ¥

**è§£å†³ï¼š**
```bash
# æ‰‹åŠ¨å¯åŠ¨
tailscale up

# æˆ–ä½¿ç”¨ PM2 è‡ªåŠ¨æ¢å¤
pm2 resurrect
```

### Q5: Tailscale IP ä¼šå˜å—ï¼Ÿ

**ä¸ä¼šã€‚** åªè¦è®¾å¤‡ä¸è¢«åˆ é™¤ï¼Œåˆ†é…çš„ `100.x.x.x` IP æ˜¯å›ºå®šçš„ã€‚

---

## ğŸ“ é™„å½•

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹çŠ¶æ€
tailscale status
tailscale status --json

# æŸ¥çœ‹æœ¬æœº IP
tailscale ip -4

# åœæ­¢/å¯åŠ¨
tailscale down
tailscale up

# æŸ¥çœ‹ç½‘ç»œè·¯å¾„ï¼ˆåˆ¤æ–­æ˜¯å¦ç›´è¿ï¼‰
tailscale status | grep -E "direct|relay"
```

### å®‰å…¨å»ºè®®

1. **å¯ç”¨è®¾å¤‡å®¡æ‰¹**ï¼šåœ¨ Tailscale ç®¡ç†åå°å¼€å¯ "Device approval"ï¼Œæ–°è®¾å¤‡éœ€è¦ç®¡ç†å‘˜æ‰¹å‡†
2. **ä½¿ç”¨ ACL**ï¼šé™åˆ¶è®¾å¤‡é—´çš„è®¿é—®æƒé™
3. **å®šæœŸè½®æ¢å¯†é’¥**ï¼šTailscale ä¼šè‡ªåŠ¨å¤„ç†
4. **ç¦ç”¨ä¸ç”¨çš„è®¾å¤‡**ï¼šåŠæ—¶åœ¨åå°ç§»é™¤ä¸¢å¤±æˆ–ä¸å†ä½¿ç”¨çš„è®¾å¤‡

---

## ğŸš€ æ‡’äººç‰ˆï¼šAI ä¸€é”®é…ç½®

è§‰å¾—é…ç½®æ­¥éª¤å¤ªå¤æ‚ï¼Ÿ**ç›´æ¥æŠŠä¸‹é¢çš„æç¤ºè¯å‘ç»™ AI**ï¼Œè®©å®ƒå¸®ä½ è‡ªåŠ¨é…ç½®ï¼

### ğŸ’¬ å¤åˆ¶è¿™æ®µæç¤ºè¯

```markdown
æˆ‘æ˜¯ä¸€ä¸ª macOS ç”¨æˆ·ï¼Œæƒ³é€šè¿‡ Tailscale å®ç°æ‰‹æœºè¿œç¨‹ SSH è¿æ¥æˆ‘çš„ Macã€‚

è¯·å¸®æˆ‘å®Œæˆä»¥ä¸‹é…ç½®ï¼š

## æˆ‘çš„ç¯å¢ƒä¿¡æ¯
- ç³»ç»Ÿï¼šmacOSï¼ˆApple Silicon/Intelï¼‰
- ç”¨æˆ·åï¼š[ä½ çš„ç”¨æˆ·åï¼Œå¦‚ ruska]
- ç›®æ ‡ï¼šæ‰‹æœºé€šè¿‡ SSH è¿æ¥ Macï¼Œå¹¶èƒ½è¿œç¨‹ç®¡ç†è¿›ç¨‹

## è¯·å¸®æˆ‘æ‰§è¡Œ

### 1. å®‰è£…å’Œå¯åŠ¨ Tailscale
```bash
# å®‰è£…
brew install tailscale

# å¯åŠ¨æœåŠ¡
sudo tailscaled install-system-daemon

# ç™»å½•
tailscale up

# è·å– IPï¼ˆè®°ä¸‹æ¥ï¼Œæ‰‹æœºè¿æ¥éœ€è¦ï¼‰
tailscale ip -4
```

### 2. å¼€å¯ SSH æœåŠ¡
```bash
# å¼€å¯è¿œç¨‹ç™»å½•
sudo systemsetup -setremotelogin on

# éªŒè¯ SSH æ˜¯å¦å·¥ä½œ
ssh localhost
```

### 3. è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆä½¿ç”¨ PM2ï¼‰
```bash
# å®‰è£… PM2
brew install pm2

# åˆ›å»º Tailscale å®ˆæŠ¤è„šæœ¬
cat > ~/tailscale-keeper.sh << 'EOF'
#!/bin/bash
while true; do
    if ! tailscale status &>/dev/null; then
        echo "[$(date)] Tailscale æ–­å¼€ï¼Œé‡æ–°è¿æ¥..."
        tailscale up --accept-routes
    else
        echo "[$(date)] Tailscale è¿æ¥æ­£å¸¸ - IP: $(tailscale ip -4 2>/dev/null)"
    fi
    sleep 60
done
EOF
chmod +x ~/tailscale-keeper.sh

# ä½¿ç”¨ PM2 ç®¡ç†
pm2 start ~/tailscale-keeper.sh --name tailscale-keeper
pm2 save
pm2 startup
```

### 4. æ‰‹æœºç«¯é…ç½®
- å®‰è£… Tailscale Appï¼ˆiOS/Androidï¼‰
- ä½¿ç”¨ä¸ç”µè„‘ç›¸åŒçš„è´¦å·ç™»å½•
- æŸ¥çœ‹ç”µè„‘åˆ†é…çš„ IPï¼ˆå¦‚ 100.x.x.xï¼‰

### 5. SSH è¿æ¥æµ‹è¯•
- ä½¿ç”¨ Termius ç­‰ SSH App
- ä¸»æœºï¼šç”µè„‘çš„ Tailscale IPï¼ˆ100.x.x.xï¼‰
- ç«¯å£ï¼š22
- ç”¨æˆ·åï¼šmacOS ç”¨æˆ·å
- å¯†ç ï¼šmacOS ç™»å½•å¯†ç 

## éªŒè¯æ­¥éª¤
1. ç¡®è®¤ `tailscale status` æ˜¾ç¤ºæ­£å¸¸
2. ç¡®è®¤ `tailscale ip -4` è¿”å› 100.x.x.x
3. æ‰‹æœºè¿æ¥åŒä¸€ Tailscale ç½‘ç»œ
4. æ‰‹æœº SSH è¿æ¥åˆ° 100.x.x.x:22
5. æˆåŠŸç™»å½•åæ‰§è¡Œ `whoami` éªŒè¯

## å¯é€‰ï¼šé…ç½® Exit Node
å¦‚æœæˆ‘æƒ³è®©æ‰‹æœºæµé‡éƒ½èµ° Macï¼ˆå®ç°ç¿»å¢™æ•ˆæœï¼‰ï¼š
```bash
# Mac ç«¯æ‰§è¡Œ
sudo tailscale up --advertise-exit-node --accept-routes
```
ç„¶ååœ¨ https://login.tailscale.com/admin/machines å¼€å¯ "Use as exit node"ï¼Œæ‰‹æœºç«¯é€‰æ‹© "Use as exit node"ã€‚

è¯·å¸®æˆ‘æ£€æŸ¥æ¯ä¸€æ­¥çš„æ‰§è¡Œç»“æœï¼Œå¦‚æœæœ‰æŠ¥é”™å‘Šè¯‰æˆ‘åŸå› å’Œè§£å†³æ–¹æ³•ã€‚
```

---

## å‚è€ƒé“¾æ¥

- [Tailscale å®˜ç½‘](https://tailscale.com)
- [WireGuard åè®®](https://www.wireguard.com/)
- [macOS è¿œç¨‹ç™»å½•å®˜æ–¹æ–‡æ¡£](https://support.apple.com/guide/mac-help/allow-a-remote-computer-to-access-your-mac-mchlp1066/mac)
- [Kimi CLI å®˜ç½‘](https://kimi.moonshot.cn) - ç»ˆç«¯ AI ç¼–ç¨‹åŠ©æ‰‹

---

**ä½œè€…ï¼š** @ruska  
**åˆ›å»ºæ—¶é—´ï¼š** 2026-02-20  
**é€‚ç”¨å¹³å°ï¼š** macOS + iOS/Android
